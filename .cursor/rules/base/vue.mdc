---
description: Vue 开发规范
globs: *.vue
alwaysApply: false
---

# Vue 开发规范

## 一、总体原则
- 所有 Vue 代码必须遵循项目通用规范（general.mdc）
- 所有 Vue 组件必须以可维护性、可读性、可扩展性为优先
- Claude 生成或修改 Vue 代码时必须严格遵守本规范

---

## 二、组件命名规范
- 组件名必须使用 **PascalCase**
- 组件名必须为多词组合，禁止与 HTML 原生标签冲突
- 组件名必须具备清晰语义，禁止使用模糊或过度简写的名称
- 基础通用组件必须使用统一前缀（如 `Base` / `App` / `V`）

示例：
- `UserProfile.vue`
- `BaseButton.vue`
- `AppLayout.vue`

---

## 三、组件结构规范
- 必须使用 **Vue 3 + `<script setup>`**
- 必须使用 **Composition API**
- 禁止在项目中使用 Options API
- 单文件组件（SFC）结构顺序推荐为：
  1. `<script setup lang="ts">`
  2. `<template>`
  3. `<style scoped lang="scss">`

- 组件必须遵循**单一职责原则**
- 页面级组件仅负责组合与布局，不承载复杂业务逻辑

---

## 四、Props 与 Emits 规范
### Props

- Props 名称必须使用 `camelCase`
- 所有 Props 必须定义明确的 TypeScript 类型
- Props 必须声明是否必填
- 数组或对象类型的默认值必须使用工厂函数返回
- 禁止滥用 Props 进行深层透传（超过 2 层应考虑 Pinia 或组合式函数）

### Emits
- 自定义事件名必须使用 `kebab-case`
- 事件名必须清晰表达“发生了什么”
- Emits 必须显式声明，不允许隐式触发事件

---

## 五、逻辑组织与复用
- 所有可复用业务逻辑必须抽离为 composables（`useXxx`）
- Composable 只负责逻辑，不负责 UI
- 禁止在组件中直接编写复杂副作用逻辑
- 禁止在组件中直接操作 `window`、`document`、`localStorage`

---

## 六、样式规范（严格执行）
### 样式技术栈约定
- **Ant Design Vue**：企业级组件（表单 / 表格 / 弹窗）
- **Tailwind CSS**：布局、间距、flex、栅格等原子样式
- **SCSS**：业务级样式、主题变量、复杂样式

### 样式规则
- 优先使用 `scoped` 样式
- 简单样式优先使用 Tailwind CSS
- 覆盖 UI 组件库样式时：
  - 在原样式文件下方新增样式块直接覆盖
  - 禁止使用样式穿透（`/deep/`、`::v-deep`）
- SCSS 嵌套层级不得超过 **3 层**
- 样式命名必须统一使用前缀：
  - `g-` 页面级
  - `m-` 模块级
  - `f-` 功能级
- 禁止使用 `id` 选择器
- 禁止使用标签选择器（如 `div`、`span`）
- 禁止使用行内样式
- 禁止使用 `!important`
- CSS 属性书写顺序必须为：
  1. 布局（display / position / flex / size）
  2. 重绘（background / border / shadow）
  3. 文本（font / color / text-align）

---

## 七、性能与渲染规范
- 频繁切换显示状态时优先使用 `v-show`
- 长列表必须使用虚拟滚动方案
- 禁止在 `computed` 中执行高复杂度逻辑
- 合理使用 `keep-alive` 缓存页面级组件
- 异步组件和路由必须使用懒加载

---

## 八、状态管理（Pinia）
- 全局状态必须通过 Pinia 管理
- Store 必须按业务域拆分
- 禁止出现单一巨型 Store
- Store 中禁止直接操作 DOM 或路由
- Store 的 `state`、`getter`、`action` 职责必须清晰

---

## 九、路由使用规范
- 路由名称必须与组件语义保持一致
- 路由组件必须使用懒加载
- 路由守卫必须保持轻量，禁止复杂业务逻辑
- 页面元信息（标题 / 权限 / 菜单）必须通过 `meta` 配置

---

## 十、通用 Vue 编码约束
- 禁止使用 `this.$parent`、`this.$refs` 操作 DOM
- 优先使用计算属性代替复杂模板表达式
- 使用 `v-for` 时必须提供稳定的 `key`
- 禁止在同一元素上同时使用 `v-if` 和 `v-for`
- 需要强制重新渲染组件时，必须通过 `key` 控制

---

## 十一、Claude 行为约束（Vue）
- Claude 在生成 Vue 代码前必须理解当前组件职责
- Claude 不得生成与本文件规则冲突的 Vue 代码
- Claude 修改组件时必须保持 API 与行为向后兼容
- 若需求与规则冲突，Claude 必须明确指出并优先遵守规则
