<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agent配置 - ComfyUI Pilot</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #252525; color: #cccccc; display: flex; height: 100vh; overflow: hidden; }

/* 侧边栏 */
.sidebar { width: 240px; background: #282828; border-right: 1px solid #3a3a3a; display: flex; flex-direction: column; }
.logo { padding: 16px; border-bottom: 1px solid #3a3a3a; font-size: 13px; font-weight: 500; color: #ffffff; }
.nav { flex: 1; padding: 8px 0; overflow-y: auto; }
.nav-item { padding: 8px 16px; font-size: 12px; color: #999999; cursor: pointer; transition: all 0.15s; }
.nav-item:hover { background: #333333; color: #cccccc; }
.nav-item.active { background: #3a3a3a; color: #ffffff; border-left: 2px solid #4a9eff; }

/* 主内容 */
.main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.header { padding: 12px 20px; background: #282828; border-bottom: 1px solid #3a3a3a; display: flex; justify-content: space-between; align-items: center; }
.header h1 { font-size: 15px; font-weight: 500; color: #ffffff; }
.btn { padding: 6px 10px; background: #3a3a3a; border: 1px solid #444444; border-radius: 3px; font-size: 12px; color: #cccccc; cursor: pointer; transition: all 0.15s; }
.btn:hover { background: #454545; color: #ffffff; }
.btn-primary { background: #4a9eff; border-color: #4a9eff; color: #ffffff; }
.btn-primary:hover { background: #5aa8ff; }

/* 内容区 */
.content { flex: 1; padding: 16px; overflow-y: auto; }
.table-container { background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 3px; }
.table-header { padding: 12px 16px; border-bottom: 1px solid #3a3a3a; display: flex; justify-content: space-between; align-items: center; }
.table-title { font-size: 13px; font-weight: 500; color: #ffffff; }
.search { padding: 6px 10px; background: #1e1e1e; border: 1px solid #3a3a3a; border-radius: 3px; font-size: 12px; color: #cccccc; width: 200px; outline: none; }
.search:focus { border-color: #555555; }
table { width: 100%; border-collapse: collapse; }
th { padding: 10px 16px; text-align: left; font-size: 12px; font-weight: 500; color: #999999; background: #282828; border-bottom: 1px solid #3a3a3a; }
td { padding: 10px 16px; font-size: 12px; color: #cccccc; border-bottom: 1px solid #3a3a3a; }
tr:last-child td { border-bottom: none; }
tr:hover td { background: #2d2d2d; }
.agent-name { color: #ffffff; font-weight: 500; }
.tag { display: inline-block; padding: 3px 8px; border-radius: 3px; font-size: 11px; }
.tag.edit { background: rgba(74, 158, 255, 0.15); color: #4a9eff; }
.tag.analyze { background: rgba(156, 39, 176, 0.15); color: #9c27b0; }
.tag.general { background: rgba(76, 175, 80, 0.15); color: #4caf50; }
.status { display: inline-flex; align-items: center; gap: 4px; font-size: 11px; }
.status.active { color: #27ae60; }
.status.maintenance { color: #f39c12; }
.status-dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; }
.actions { display: flex; gap: 4px; }
.actions .btn { padding: 4px 8px; font-size: 11px; }

/* 模态框 */
.modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); align-items: center; justify-content: center; z-index: 1000; }
.modal.show { display: flex; }
.modal-content { background: #2a2a2a; border: 1px solid #444444; border-radius: 4px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; }
.modal-header { padding: 16px; border-bottom: 1px solid #3a3a3a; display: flex; justify-content: space-between; align-items: center; }
.modal-title { font-size: 15px; font-weight: 500; color: #ffffff; }
.close { background: none; border: none; font-size: 20px; color: #777777; cursor: pointer; padding: 0; width: 24px; height: 24px; }
.close:hover { color: #cccccc; }
.modal-body { padding: 16px; }
.form-group { margin-bottom: 12px; }
.form-group label { display: block; font-size: 12px; color: #cccccc; margin-bottom: 4px; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px 12px; background: #1e1e1e; border: 1px solid #3a3a3a; border-radius: 4px; font-size: 13px; color: #cccccc; outline: none; transition: border-color 0.2s; }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: #555555; }
.form-group textarea { resize: vertical; min-height: 80px; font-family: 'Consolas', monospace; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.modal-footer { padding: 12px 16px; border-top: 1px solid #3a3a3a; display: flex; justify-content: flex-end; gap: 8px; }

/* 滚动条 */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #444444; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #555555; }
</style>
</head>
<body>
<div class="sidebar">
  <div class="logo">ComfyUI Pilot</div>
  <div class="nav">
    <div class="nav-item">服务管理</div>
    <div class="nav-item active">Agent配置</div>
    <div class="nav-item">模型管理</div>
    <div class="nav-item">用户管理</div>
    <div class="nav-item">系统监控</div>
  </div>
</div>

<div class="main">
  <div class="header">
    <h1>Agent 配置管理</h1>
    <button class="btn btn-primary" onclick="openModal()">+ 新建 Agent</button>
  </div>

  <div class="content">
    <div class="table-container">
      <div class="table-header">
        <span class="table-title">Agent 列表</span>
        <input type="text" class="search" placeholder="搜索 Agent...">
      </div>
      <table>
        <thead>
          <tr>
            <th>Agent 名称</th>
            <th>类型</th>
            <th>关联模型</th>
            <th>温度</th>
            <th>最大 Token</th>
            <th>状态</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <div class="modal-header">
      <span class="modal-title">新建 Agent</span>
      <button class="close" onclick="closeModal()">×</button>
    </div>
    <div class="modal-body">
      <form id="form">
        <div class="form-row">
          <div class="form-group">
            <label>Agent 名称 *</label>
            <input type="text" placeholder="工作流编辑助手" required>
          </div>
          <div class="form-group">
            <label>类型 *</label>
            <select required>
              <option value="">请选择</option>
              <option>工作流编辑</option>
              <option>工作流分析</option>
              <option>通用助手</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>系统提示词 *</label>
          <textarea placeholder="定义 Agent 的角色和行为..." required></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>关联模型 *</label>
            <select required>
              <option value="">请选择</option>
              <option>GPT-4 Turbo</option>
              <option>Claude 3 Opus</option>
              <option>智谱 GLM-4</option>
            </select>
          </div>
          <div class="form-group">
            <label>状态</label>
            <select>
              <option>活跃</option>
              <option>维护中</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>温度参数</label>
            <input type="number" value="0.7" min="0" max="2" step="0.1">
          </div>
          <div class="form-group">
            <label>最大 Token</label>
            <input type="number" value="4096" min="1" max="128000">
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-primary" onclick="save()">保存</button>
    </div>
  </div>
</div>

<script>
const data = [
  {name:'工作流编辑助手', type:'工作流编辑', model:'GPT-4 Turbo', temp:0.7, tokens:4096, status:'活跃'},
  {name:'工作流分析专家', type:'工作流分析', model:'Claude 3 Opus', temp:0.5, tokens:8192, status:'活跃'},
  {name:'通用对话助手', type:'通用助手', model:'智谱 GLM-4', temp:0.8, tokens:4096, status:'活跃'},
  {name:'工作流优化顾问', type:'工作流分析', model:'GPT-4 Turbo', temp:0.6, tokens:4096, status:'维护中'}
];

const typeMap = {'工作流编辑':'edit', '工作流分析':'analyze', '通用助手':'general'};

tbody.innerHTML = data.map(a => `
  <tr>
    <td><span class="agent-name">${a.name}</span></td>
    <td><span class="tag ${typeMap[a.type]}">${a.type}</span></td>
    <td>${a.model}</td>
    <td>${a.temp}</td>
    <td>${a.tokens.toLocaleString()}</td>
    <td><span class="status ${a.status==='活跃'?'active':'maintenance'}"><span class="status-dot"></span>${a.status}</span></td>
    <td>
      <div class="actions">
        <button class="btn" onclick="alert('查看')">查看</button>
        <button class="btn" onclick="openModal()">编辑</button>
        <button class="btn" onclick="confirm('确认删除?')&&alert('已删除')">删除</button>
      </div>
    </td>
  </tr>
`).join('');

function openModal() { modal.classList.add('show'); }
function closeModal() { modal.classList.remove('show'); }
function save() { form.checkValidity() ? (alert('已保存'), closeModal()) : form.reportValidity(); }
modal.onclick = e => e.target === modal && closeModal();
</script>
</body>
</html>
